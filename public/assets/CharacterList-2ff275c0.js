import{r,j as s}from"./index-b7fc291e.js";import{C as u}from"./CharacterCard-20af0b8d.js";import{a as v}from"./api-798963ee.js";import{t as f,a as N}from"./translations-214f6220.js";const w=({refreshTrigger:x})=>{const[n,j]=r.useState([]),[p,i]=r.useState(!0),[l,t]=r.useState(""),[e,c]=r.useState(null);r.useEffect(()=>{d()},[x]);const d=async()=>{try{i(!0);const a=await v.getCharacters();j(a),t("")}catch(a){t(a instanceof Error?a.message:"Error al cargar los personajes")}finally{i(!1)}},m=a=>{c((e==null?void 0:e.id)===a.id?null:a)};return p?s.jsx("div",{className:"loading",children:"Cargando personajes..."}):l?s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"error",children:l}),s.jsx("button",{className:"button",onClick:d,children:"Intentar de Nuevo"})]}):n.length===0?s.jsxs("div",{className:"card",children:[s.jsx("h2",{children:"No se Encontraron Personajes"}),s.jsx("p",{children:"Â¡Crea tu primer personaje para comenzar!"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"card",children:[s.jsxs("h2",{children:["Lista de Personajes (",n.length,")"]}),s.jsx("p",{children:"Haz clic en un personaje para ver informaciÃ³n detallada"})]}),s.jsx("div",{className:"character-grid",children:n.map(a=>s.jsx(u,{character:a,onSelect:m},a.id))}),e&&s.jsxs("div",{className:"card",children:[s.jsxs("h3",{children:["Detalles del Personaje: ",e.name]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginTop:"20px"},children:[s.jsxs("div",{children:[s.jsx("h4",{children:"InformaciÃ³n BÃ¡sica"}),s.jsxs("div",{className:"stat-row",children:[s.jsx("span",{children:"ID:"}),s.jsx("span",{style:{fontFamily:"monospace",fontSize:"0.9rem"},children:e.id})]}),s.jsxs("div",{className:"stat-row",children:[s.jsx("span",{children:"Nombre:"}),s.jsx("span",{children:e.name})]}),s.jsxs("div",{className:"stat-row",children:[s.jsx("span",{children:"Clase:"}),s.jsx("span",{children:f(e.characterClass)})]}),s.jsxs("div",{className:"stat-row",children:[s.jsx("span",{children:"Nivel:"}),s.jsx("span",{children:e.level})]}),s.jsxs("div",{className:"stat-row",children:[s.jsx("span",{children:"Experiencia:"}),s.jsx("span",{children:e.experience})]})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"EstadÃ­sticas de Combate"}),s.jsxs("div",{className:"stat-row",children:[s.jsx("span",{children:"Puntos de Vida:"}),s.jsxs("span",{children:[e.hitPoints.current,"/",e.hitPoints.max]})]}),s.jsxs("div",{className:"stat-row",children:[s.jsx("span",{children:"Clase de Armadura:"}),s.jsx("span",{children:e.armorClass})]}),s.jsxs("div",{className:"stat-row",children:[s.jsx("span",{children:"Estado:"}),s.jsx("span",{style:{color:e.isAlive?"#00b894":"#ff6b6b"},children:e.isAlive?"ðŸ’š Vivo":"ðŸ’€ Muerto"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"Puntuaciones de Habilidad"}),Object.entries(e.abilityScores).map(([a,o])=>{const h=Math.floor((o-10)/2);return s.jsxs("div",{className:"stat-row",children:[s.jsxs("span",{children:[N(a),":"]}),s.jsxs("span",{children:[o," (",h>=0?"+":"",h,")"]})]},a)})]})]}),s.jsxs("div",{style:{marginTop:"20px",display:"flex",gap:"10px"},children:[s.jsx("button",{className:"button secondary",onClick:()=>c(null),children:"Cerrar Detalles"}),s.jsx("button",{className:"button",onClick:()=>{navigator.clipboard.writeText(e.id),alert("Â¡ID del personaje copiado al portapapeles!")},children:"Copiar ID"})]})]})]})};export{w as CharacterList};
