import{r as o,a as g,j as a}from"./index-7eaf2622.js";const w={fighter:"Guerrero",wizard:"Mago",rogue:"PÃ­caro",cleric:"ClÃ©rigo",ranger:"Explorador",barbarian:"BÃ¡rbaro",bard:"Bardo",druid:"Druida",monk:"Monje",paladin:"PaladÃ­n",sorcerer:"Hechicero",warlock:"Brujo"};function M(c){return w[c.toLowerCase()]||c}const E=({onCharacterCreated:c})=>{const[t,n]=o.useState({name:"",characterClass:"",level:1,abilityScores:{strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10},maxHitPoints:8,armorClass:10,experience:0}),[m,b]=o.useState([]),[h,u]=o.useState(!1),[x,d]=o.useState(""),[p,j]=o.useState("");o.useEffect(()=>{y()},[]),o.useEffect(()=>{f()},[t.abilityScores,t.characterClass]);const y=async()=>{try{const e=await g.getCharacterClasses();b(e),e.length>0&&n(s=>({...s,characterClass:e[0]}))}catch{d("Error al cargar las clases de personaje")}},f=()=>{const e=Math.floor((t.abilityScores.constitution-10)/2),s=Math.floor((t.abilityScores.dexterity-10)/2);let r=8;switch(t.characterClass){case"fighter":case"paladin":case"ranger":r=10;break;case"barbarian":r=12;break;case"bard":case"sorcerer":case"wizard":r=6;break;default:r=8}const i=Math.max(1,r+e),l=10+s;n(N=>({...N,maxHitPoints:i,armorClass:l}))},C=()=>{const e=()=>{const r=Array.from({length:4},()=>Math.floor(Math.random()*6)+1);return r.sort((i,l)=>l-i),r.slice(0,3).reduce((i,l)=>i+l,0)},s={strength:e(),dexterity:e(),constitution:e(),intelligence:e(),wisdom:e(),charisma:e()};n(r=>({...r,abilityScores:s}))},v=(e,s)=>{const r=parseInt(s)||3,i=Math.max(3,Math.min(18,r));n(l=>({...l,abilityScores:{...l.abilityScores,[e]:i}}))},S=async e=>{e.preventDefault(),u(!0),d(""),j("");try{await g.createCharacter(t),j("Â¡Personaje creado exitosamente!"),c==null||c(),n({name:"",characterClass:m[0]||"",level:1,abilityScores:{strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10},maxHitPoints:8,armorClass:10,experience:0})}catch(s){d(s instanceof Error?s.message:"Error al crear el personaje")}finally{u(!1)}};return a.jsxs("div",{className:"card",children:[a.jsx("h2",{children:"Crear Nuevo Personaje"}),x&&a.jsx("div",{className:"error",children:x}),p&&a.jsx("div",{className:"success",children:p}),a.jsxs("form",{onSubmit:S,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"name",children:"Nombre del Personaje"}),a.jsx("input",{type:"text",id:"name",value:t.name,onChange:e=>n(s=>({...s,name:e.target.value})),placeholder:"Ingresa el nombre del personaje",required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"characterClass",children:"Clase de Personaje"}),a.jsx("select",{id:"characterClass",value:t.characterClass,onChange:e=>n(s=>({...s,characterClass:e.target.value})),required:!0,children:m.map(e=>a.jsx("option",{value:e,children:M(e)},e))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"level",children:"Nivel"}),a.jsx("input",{type:"number",id:"level",min:"1",max:"20",value:t.level,onChange:e=>n(s=>({...s,level:parseInt(e.target.value)||1}))})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[a.jsx("h3",{children:"Puntuaciones de Habilidad"}),a.jsx("button",{type:"button",className:"button secondary",onClick:C,children:"ðŸŽ² Tirar EstadÃ­sticas"})]}),a.jsx("div",{className:"ability-scores",children:Object.entries(t.abilityScores).map(([e,s])=>a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:e,children:(()=>({strength:"Fue",dexterity:"Des",constitution:"Con",intelligence:"Int",wisdom:"Sab",charisma:"Car"})[e]||e.charAt(0).toUpperCase()+e.slice(1).substring(0,3))()}),a.jsx("input",{type:"number",id:e,min:"3",max:"18",value:s,onChange:r=>v(e,r.target.value)}),a.jsxs("div",{style:{textAlign:"center",fontSize:"0.8rem",opacity:.8},children:[Math.floor((s-10)/2)>=0?"+":"",Math.floor((s-10)/2)]})]},e))})]}),a.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"20px"},children:[a.jsxs("div",{className:"form-group",style:{flex:1},children:[a.jsx("label",{children:"Puntos de Vida"}),a.jsx("input",{type:"text",value:t.maxHitPoints,readOnly:!0})]}),a.jsxs("div",{className:"form-group",style:{flex:1},children:[a.jsx("label",{children:"Clase de Armadura"}),a.jsx("input",{type:"text",value:t.armorClass,readOnly:!0})]})]}),a.jsx("button",{type:"submit",className:"button",disabled:h||!t.name.trim(),children:h?"Creando...":"Crear Personaje"})]})]})};export{E as CharacterCreation};
